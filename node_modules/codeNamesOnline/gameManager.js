'use strict';

//==============================================================================
//  Modules
//==============================================================================

var databaseManager = require('codeNamesOnline/database/databaseManager');

//==============================================================================
//  Games
//==============================================================================

var CurrentGames = [];

//==============================================================================
//  Exports
//==============================================================================

module.exports.CreateNewGame = function () {
}

//==============================================================================
//  Private functions
//==============================================================================

function Game(gameCode, wordGrid) {
	var gameCode = gameCode;
	var wordGrid = wordGrid;
	var blueTeamScore = 0;
	var redTeamScore = 0;
	var blueTeamCodeMaster = null;
	var redTeamCodeMaster = null;

	this.getGameCode = function () {
		return gameCode;
	};

	this.getWordGrid = function () {
		return wordGrid;
	};

	this.getBlueTeamScore = function () {
		return blueTeamScore;
	};

	this.getRedTeamScore = function () {
		return redTeamScore;
	};

	this.getBlueTeamCodeMaster = function () {
		return blueTeamCodeMaster;
	};

	this.getRedTeamCodeMaster = function () {
		return redTeamCodeMaster;
	};

	this.setBlueTeamCodeMaster = function (codeMaster) {
		blueTeamCodeMaster = codeMaster;
	};

	this.setRedTeamCodeMaster = function (codeMaster) {
		redTeamCodeMaster = codeMaster;
	};
}

function getWordGrid(callback) {
}

function GenerateGameCode() {

	var gameCode;
	var possible = 'abcdefghijklmnopqrstuvwxyz';

	do {
		gameCode = '';
		for (var i = 0; i < 4; i++) {
			gameCode += possible.charAt(Math.floor(Math.random() * possible.length));
		}
	} while(!isUniqueGameCode(gameCode));

	return gameCode;
}

function isUniqueGameCode(gameCode) {
	for (var i = 0; i < CurrentGames.length; i++) {
		if (gameCode === CurrentGames[i].GetGameCode()) {
			return false;
		}
	}
	return false;
}
